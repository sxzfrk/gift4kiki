<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Growing Beanstalk</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #cceeff;
    }
    h1 {
      margin-top: 20px;
    }
    #beanstalk {
      position: relative;
      width: 100px;
      margin: 20px auto;
      background: #228B22;
      border-radius: 50px;
      height: 50px;
      transition: height 1s ease;
    }
    .branch {
      position: absolute;
      width: 200px;
      height: 80px;
      background: transparent;
    }
    .branch svg {
      width: 100%;
      height: 100%;
    }
    .milestone {
      position: absolute;
      width: 120px;
      background: white;
      border: 2px solid #444;
      border-radius: 10px;
      padding: 5px;
      text-align: center;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.3);
      transform: rotate(-2deg);
    }
    .milestone img {
      width: 100px;
      border-radius: 8px;
    }
    #waterBtn {
      margin-top: 20px;
      padding: 10px 20px;
      background: green;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
    }
    #nextBtn {
      margin-top: 20px;
      padding: 10px 20px;
      background: orange;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>

  <h1>üå± Our Growing Beanstalk</h1>
  <div id="beanstalk"></div>
  <button id="waterBtn">üíß Water Plant</button>
  <button id="nextBtn">Next Level ‚û°Ô∏è</button>

  <script>
    const milestones = [
      { text: "4th Sept 2023 - First pic together", img: "images/milestone1.png" },
      { text: "16th Feb 2024 - Official last day of school", img: "images/milestone2.png" },
      { text: "3rd Mar 2024 - Still going to school", img: "images/milestone3.png" },
      { text: "22nd Mar 2024 - Park day", img: "images/milestone4.png" },
      { text: "8th Apr 2024 - I wam kis tooth", img: "images/milestone5.png" },
      { text: "8th Apr 2024 - Farewell :(", img: "images/milestone6.png" },
      { text: "3rd Jun 2024 - You asked me out :)", img: "images/milestone7.png" },
      { text: "20th Jun 2024 - First date, first kiss", img: "images/milestone8.png" },
      { text: "2nd Jul 2024 - A day of immense comfort", img: "images/milestone9.png" },
      { text: "4th Oct 2024 - Cute late night calls", img: "images/milestone10.png" },
      { text: "23rd Mar 2025 - Roblox dates", img: "images/milestone11.png" },
      { text: "3rd Jun 2025 - Our anniversary ‚ù§Ô∏è", img: "images/milestone12.png" },
      { text: "9th Jun 2025 - hehehe", img: "images/milestone13.png" },
      { text: "30th Jun 2025 - Paris trip!", img: "images/milestone14.png" },
      { text: "Now - look into the gmeet hehe", img: null }
    ];

    const beanstalk = document.getElementById("beanstalk");
    const waterBtn = document.getElementById("waterBtn");
    const nextBtn = document.getElementById("nextBtn");
    let current = 0;
    let stalkHeight = 50;

    function addMilestone(index) {
      const branch = document.createElement("div");
      branch.classList.add("branch");
      const side = index % 2 === 0 ? "left" : "right";
      const topPos = stalkHeight - 40;

      branch.style.top = topPos + "px";
      branch.style[side] = "-200px";

      // Draw a curvy branch with SVG
      branch.innerHTML = `
        <svg>
          <path d="M ${side === "left" ? 200 : 0},40 Q ${side === "left" ? 100 : 100},0 ${side === "left" ? 0 : 200},40"
            stroke="green" stroke-width="6" fill="transparent" />
        </svg>
      `;

      const milestoneDiv = document.createElement("div");
      milestoneDiv.classList.add("milestone");
      milestoneDiv.style[side] = "-140px";
      milestoneDiv.style.top = "-20px";

      if (milestones[index].img) {
        milestoneDiv.innerHTML = `<img src="${milestones[index].img}" alt=""><p>${milestones[index].text}</p>`;
      } else {
        milestoneDiv.innerHTML = `<p>${milestones[index].text}</p>`;
      }

      branch.appendChild(milestoneDiv);
      beanstalk.appendChild(branch);
    }

    waterBtn.addEventListener("click", () => {
      if (current < milestones.length) {
        stalkHeight += 120;
        beanstalk.style.height = stalkHeight + "px";
        addMilestone(current);
        current++;

        // If all milestones are shown, check unlock condition
        if (current === milestones.length) {
          checkUnlock();
        }
      }
    });

    function checkUnlock() {
      const unlockTime = new Date("2025-08-18T00:00:00");
      const now = new Date();
      if (now >= unlockTime) {
        nextBtn.style.display = "inline-block";
      } else {
        // keep checking until unlock time arrives
        const interval = setInterval(() => {
          if (new Date() >= unlockTime) {
            nextBtn.style.display = "inline-block";
            nextBtn.addEventListener("click", () => {
  window.location.href = "level19.html";  // üëà put your Level 19 file path here
});
            clearInterval(interval);
          }
        }, 1000 * 60); // check every minute
      }
    }
  </script>
</body>
</html>
